<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <DeleteExistingFiles>true</DeleteExistingFiles>
    <ExcludeApp_Data>false</ExcludeApp_Data>
    <LaunchSiteAfterPublish>true</LaunchSiteAfterPublish>
    <LastUsedBuildConfiguration>Release</LastUsedBuildConfiguration>
    <LastUsedPlatform>Any CPU</LastUsedPlatform>
    <PublishProvider>FileSystem</PublishProvider>
    <PublishUrl>C:\inetpub\wwwroot\TestPayroll\</PublishUrl>
    <WebPublishMethod>FileSystem</WebPublishMethod>
    <_TargetId>Folder</_TargetId>
  </PropertyGroup>
  
  <Target Name="CustomDelete" BeforeTargets="PipelinePreDeployCopyAllFilesToOneFolder">
    <Message Text="Starting custom delete operation..." Importance="high" />
    <ItemGroup>
      <FilesToDelete Include="$(PublishUrl)**\*" Exclude="$(PublishUrl)appsettings.json" />
    </ItemGroup>
    <Delete Files="@(FilesToDelete)" />
    <Message Text="Finished custom delete operation." Importance="high" />
  </Target>
</Project>
