@{ string emailtovar = "";}

@model AdvanceCRM.Common.AttendancePageModel
@inject Serenity.ITextLocalizer Localizer
@{
    ViewData["Title"] = Localizer.Get("Navigation.Attendance");
    ViewData["PageId"] = "AttendanceDashboard";
}

@section Head {

    <link rel="stylesheet" href="~/Content/iCheck/flat/blue.css">
    <link rel="stylesheet" href="~/Scripts/morris/morris.css">
    <link rel="stylesheet" href="~/Scripts/datepicker/datepicker3.css">
    <link rel="stylesheet" href="~/Scripts/daterangepicker/daterangepicker-bs3.css">
    <link rel="stylesheet" href="~/Scripts/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css">
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=drawing,geometry"></script>
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
    <script src="~/Scripts/raphael/raphael-min.js"></script>
    <script src="~/Scripts/morris/morris.min.js"></script>
    <script src="~/Scripts/sparkline/jquery.sparkline.min.js"></script>
    <script src="~/Scripts/knob/jquery.knob.js"></script>
    <script src="~/Scripts/daterangepicker/moment.min.js"></script>
    <script src="~/Scripts/daterangepicker/daterangepicker.js"></script>
    <script src="~/Scripts/jquery-1.6.4.min.js" type="text/javascript"></script>

    
    <script src="~/Scripts/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.js"></script>
    <script src="~/Scripts/adminlte/demo.js"></script>


    <script src="~/amcharts/amcharts.js"></script>
    <script src="~/amcharts/gauge.js"></script>
    <script src="~/amcharts/plugins/export/export.min.js"></script>
    <script src="~/amcharts/plugins/responsive/responsive.min.js"></script>
    <link rel="stylesheet" href="~/amcharts/plugins/export/export.css" type="text/css" media="all" />
    <script src="~/amcharts/themes/light.js"></script>
}

@section ContentHeader {
    <h1>My @Localizer.Get("Navigation.Attendance")<small>@Localizer.Get("Site.Dashboard.ContentDescription")</small></h1>
}

<style>
    .example-modal .modal {
        position: relative;
        top: auto;
        bottom: auto;
        right: auto;
        left: auto;
        display: block;
        z-index: 1;
    }

    #mapDiv img {
        max-width: none !important;
    }

    .example-modal .modal {
        background: transparent !important;
    }
</style>

<div class="row">

    <div class="col-lg-3 col-xs-8">

        <!-- small box -->
        <div class="small-box bg-aqua">
            <div class="inner">
                <h3>@Model.TotalEmployee</h3>
                <p>Total Employees</p>
            </div>
            <div class="icon">
                <i class="ion ion-bag"></i>
            </div>
            <a href="/Administration/User" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>
        </div>
    </div><!-- ./col -->
    <div class="col-lg-3 col-xs-8">
        <!-- small box -->
        <div class="small-box bg-teal">
            <div class="inner">
                <h3>@Model.TotalPunchedIn</h3>
                <p>Total Punch-Ins</p>
            </div>
            <div class="icon">
                <i class="ion ion-stats-bars"></i>
            </div>
            <a href="/Attendance" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>
        </div>
    </div><!-- ./col -->
    <div class="col-lg-3 col-xs-8">
        <!-- small box -->
        <div class="small-box" style="background-color:lightblue">
            <div class="inner">
                <h3>@Model.punchoutEmployee</h3>
                <p>Total Punch-Outs</p>
            </div>
            <div class="icon">
                <i class="ion ion-person-add"></i>
            </div>
            <a href="/Attendance" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>
        </div>
    </div><!-- ./col -->
    <div class="col-lg-3 col-xs-8">
        <!-- small box -->
        <div class="small-box bg-gray">
            <div class="inner">
                <h3>@Model.TotalInactive</h3>
                <p>In-Active Employees</p>
            </div>
            <div class="icon">
                <i class="ion ion-pie-graph"></i>
            </div>
            <a href="Administration/User" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>
        </div>
    </div><!-- ./col -->

</div><!-- /.row -->
<style>
    #map {
        height: 500px;
        width: 100%;
    }
</style>
<div class="row">
    <section class="col-lg-3 connectedSortable">
        <div class="box-body">
            <ul class="todo-list" id="locations">
                    @if (Model.Coordinates != null)
                    {
                        foreach (var laglat in Model.Coordinates)
                        {
                            if (laglat.Coordinates != null)
                            {
                                string coor = laglat.Coordinates;
                                string[] laglist = coor.Split(',');

                                <li data-lat=@laglist[0] data-lng=@laglist[1]><strong>@laglat.DisplayName</strong><br /> Location  : @laglat.Location</li>
                            }
                        }
                    }
                </ul>
            </div>
    </section>
    <section class="col-lg-9 connectedSortable">
        <div id="map"></div>
    </section>
    </div><!-- /.row -->
    <script src="script.js"></script>

    <script>
        function initMap() {
            // Initialize the map
            const map = new google.maps.Map(document.getElementById('map'), {
                zoom: 5, // You can adjust the initial zoom level
                center: { lat: 23.487947052533364, lng: 78.00643538906881 }, // Center of the map (e.g., United States)
            });

            // Get the list of locations
            const locations = document.querySelectorAll('#locations li');

            // Loop through the locations and add markers to the map
            locations.forEach(location => {
                const lat = parseFloat(location.getAttribute('data-lat'));
                const lng = parseFloat(location.getAttribute('data-lng'));
                const marker = new google.maps.Marker({
                    position: { lat, lng },
                    map: map,
                    title: location.textContent,
                });
            });
        }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCKteaFdDY_5cKL-FnucLu0Jd6tFHBJJJY&callback=initMap" async defer></script>


    

</section>
